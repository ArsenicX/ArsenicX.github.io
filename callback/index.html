<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>Android å›è°ƒæœºåˆ¶ä¸¾ä¾‹åŠä¸ªäººç†è§£ | ArsenicX</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://ArsenicX.github.io//favicon.ico?v=1587893622017">
<link rel="stylesheet" href="https://ArsenicX.github.io//styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="layout: post
title:  &quot;Android å›è°ƒæœºåˆ¶ä¸¾ä¾‹åŠä¸ªäººç†è§£&quot;
date:   2019-03-26 10:06:38
categories: Android
comments: false

å…ˆä¸¾..." />
    <meta name="keywords" content="Android" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://ArsenicX.github.io/">
        <img src="https://ArsenicX.github.io//images/avatar.png?v=1587893622017" class="site-logo">
        <h1 class="site-title">ArsenicX</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            é¦–é¡µ
          </a>
        
      
        
          <a href="/java" class="site-nav">
            Java
          </a>
        
      
        
          <a href="/git" class="site-nav">
            Git
          </a>
        
      
        
          <a href="/android" class="site-nav">
            Android
          </a>
        
      
        
          <a href="/others" class="site-nav">
            Others
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      
    </div>
    <div class="site-footer">
      <a href="https://github.com/ArsenicX" target="_blank">Github</a> | <a class="rss" href="https://ArsenicX.github.io//atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">Android å›è°ƒæœºåˆ¶ä¸¾ä¾‹åŠä¸ªäººç†è§£</h2>
            <div class="post-date">2020-02-14</div>
            
            <div class="post-content" v-pre>
              <p>layout: post</p>
<p>title:  &quot;Android å›è°ƒæœºåˆ¶ä¸¾ä¾‹åŠä¸ªäººç†è§£&quot;</p>
<p>date:   2019-03-26 10:06:38<br>
categories: Android<br>
comments: false</p>
<hr>
<h4 id="å…ˆä¸¾1ä¸ªjavaçš„ä¾‹å­ç”¨æ¥å¼•å…¥"><strong>å…ˆä¸¾1ä¸ªJavaçš„ä¾‹å­ç”¨æ¥å¼•å…¥</strong></h4>
<p>å°ç‹å»å‘å°æè¯·æ•™æ•°å­¦é¢˜ï¼Œå°æåœ¨åˆ¤æ–­å®Œå°ç‹çš„é—®é¢˜åå°†ç»“æœè¿”å›ç»™å°ç‹ï¼š</p>
<pre><code class="language-java">//è¿™ä¸ªæ˜¯å›è°ƒæ¥å£ï¼Œåœ¨å°æè¿”å›ç»“æœç»™å°ç‹æ—¶è¦ç”¨åˆ°
public  interface CallBack {
    void solve(String result);
}
</code></pre>
<pre><code class="language-java">//è¿™ä¸ªæ˜¯å°ç‹ï¼Œé‡å†™äº†solveæ–¹æ³•
public class Wang implements CallBack {
    private Li li;

    public Wang(Li li) { this.li = li; }

    public void ask(String question){
        li.answer(Wang.this , question);
    }

	//æ­¤å¤„çš„solve()ä¾¿æ˜¯å›è°ƒæ–¹æ³•ï¼Œå¯ä»¥åœ¨å…¶ä»–ç±»ä¸­è°ƒç”¨
    @Override
    public void solve(String result) {
        System.out.println(&quot;ç­”æ¡ˆæ˜¯:&quot;  + result);
    }
}
</code></pre>
<pre><code class="language-java">//è¿™ä¸ªæ˜¯å°æï¼Œåˆ¤æ–­å®Œé—®é¢˜ä¹‹åå°†ç­”æ¡ˆé€šè¿‡callBack.solveè¿”å›ç»™å°ç‹
public  class Li {
    public  void answer(CallBack callBack, String question){
        String result = &quot;ä¸çŸ¥é“&quot;;

        System.out.println(&quot;é—®é¢˜æ˜¯ï¼š&quot; + question);
        if(question.equals(&quot;1+1=?&quot;))    result = &quot;2&quot;;
        else if(question.equals(&quot;1+2=?&quot;))   result = &quot;3&quot;;

        callBack.solve(result);
    }
}
</code></pre>
<pre><code class="language-java">æµ‹è¯•ç±»
public  class Test {
    public  static  void main(String[]args){
        Li li = new  Li();
        Wang wang = new  Wang(li);
        wang.ask(&quot;1+1=?&quot; );
    }
}
</code></pre>
<p>æ­¤ä¾‹å¦‚æœèƒ½çœ‹æ‡‚å°±ä¸å¿…å†æ·±ç©¶äº†ï¼Œè¿™é‡Œåªæ˜¯ä¸ºäº†å¼•å…¥<br>
ç›´æ¥çœ‹ä¸‹é¢çš„Androidçš„å®é™…ä¾‹å­<br>
<br><br></p>
<h4 id="ç®€å•éœ€æ±‚ç‚¹å‡»fragmentçš„buttonæ”¹å˜mainactivityä¸­textviewçš„æ˜¾ç¤º"><strong>ç®€å•éœ€æ±‚ï¼šç‚¹å‡»Fragmentçš„Buttonï¼Œæ”¹å˜MainActivityä¸­TextViewçš„æ˜¾ç¤º</strong></h4>
<figure data-type="image" tabindex="1"><img src="https://ArsenicX.github.io//post-images/1585280518703.jpg" alt="" loading="lazy"></figure>
<pre><code class="language-java">//å®šä¹‰æ¥å£
public interface CallBackListener {
    void onCallBack();
}
</code></pre>
<pre><code class="language-java">public class MainActivity extends AppCompatActivity implements CallBackListener {

    int i = 0;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

	//æ ¹æ®è‡ªå®šä¹‰éœ€æ±‚é‡å†™æ–¹æ³•
    @Override
    public void onCallBack() {
        TextView textView = findViewById(R.id.textView);
        textView.setText(&quot;ç‚¹å‡»äº†&quot; + i + &quot;æ¬¡&quot;);
        i++;
    }
}
</code></pre>
<pre><code class="language-java">public class CallBackFragment extends Fragment {

    private CallBackListener callBackListener;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.fragment, container, false);
    }

    @Override
    public void onActivityCreated(@Nullable Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        
        if (getActivity() instanceof CallBackListener)
            callBackListener = (CallBackListener) getActivity();
    }

    @Override
    public void onViewCreated(View view, @Nullable Bundle savedInstanceState) {
        super.onViewCreated(view, savedInst17:35 2019/4/8anceState);

        Button btn = (Button) view.findViewById(R.id.button);
        btn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                if(callBackListener != null)
                    callBackListener.onCallBack();
            }
        });
    }
}
</code></pre>
<blockquote>
<p>onCreateViewå’ŒonViewCreatedçš„åŒºåˆ«ï¼š<strong>æ—¥å¸¸ä½¿ç”¨æ²¡åŒºåˆ«ï¼šï¼‰</strong><br>
<br>onCreateViewå¯èƒ½ä¼šï¼ˆæå°‘ï¼‰åœ¨ç»˜åˆ¶å­Viewï¼ˆTextViewã€Buttonç­‰é™¤äº†ä¸»Layoutçš„å…¶ä»–æ§ä»¶ï¼‰çš„æ—¶å€™å´©æºƒï¼Œè¿™æ—¶å¯ä»¥å°è¯•åœ¨onCreateViewä¸­åˆå§‹åŒ–ä¸»Layoutï¼Œè€Œåœ¨onViewCreatedä¸­ä½¿ç”¨findViewByIdåˆå§‹åŒ–å…¶ä»–æ§ä»¶ã€‚<br>
è°ƒç”¨é¡ºåºï¼šonViewCreated()ä¼šåœ¨onCreateView()ä¹‹åç«‹é©¬è¢«è°ƒç”¨<br>
<br>æ¥æºï¼š<a href="https://stackoverflow.com/questions/25119090/difference-between-oncreateview-and-onviewcreated-in-fragment">stackoverflow</a></p>
</blockquote>
<p><br><br><br>
ç»¼ä¸Š2ä¸ªä¾‹å­ï¼Œä»¥ä¸‹æ˜¯æˆ‘<strong>ä¸ªäººçš„ç†è§£å’Œæƒ³æ³•</strong></p>
<ol>
<li>
<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ¥å£Lï¼ˆå¦‚ä¸Šä¾‹çš„CallBackæˆ–CallBackListenerï¼‰ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ ä½ æƒ³è¦çš„æ•ˆæœï¼ˆ solve() æˆ– onCallBack() ï¼‰ã€‚è¿™ä¸ªæ¥å£å¯ä»¥åˆ›å»ºåœ¨å¤–é¢ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºåœ¨æŸä¸ªç±»ä¸­</p>
</li>
<li>
<p>å“ªä¸ªç±»æƒ³è¦å®ç°è¿™ä¸ªæ•ˆæœï¼Œè¿™ä¸ªæ•ˆæœæœ€ç»ˆä½“ç°åœ¨å“ªä¸ªç±»ä¸Šé¢ï¼Œå°±è®©è¿™ä¸ªç±»ç»§æ‰¿å‰é¢å®šä¹‰å¥½çš„é‚£ä¸ªæ¥å£ï¼ˆå¦‚æœè¿™ä¸ªæ¥å£æ˜¯å•ç‹¬æ–°å»ºçš„<sup>æƒ…å†µ1</sup>ï¼‰ï¼Œæˆ–è€…åœ¨è¿™ä¸ªç±»ä¸­newå‡ºæ¥å£å¹¶é‡å†™æ–¹æ³•ï¼ˆå¦‚æœè¿™ä¸ªæ¥å£æ˜¯æ–°å»ºåœ¨å…¶ä»–ç±»ä¸­çš„<sup>æƒ…å†µ2</sup>ï¼‰</p>
<p>æƒ…å†µ1: ä½ æƒ³è®©å°ç‹å»è¾“å‡ºç»“æœï¼ˆå› ä¸ºå¦‚æœæ˜¯å°ç‹è¾“å‡ºçš„è¯å°±è¯´æ˜å°ç‹æ‹¿åˆ°äº†ç»“æœï¼‰ï¼Œå°±è®©Wangç»§æ‰¿CallBackï¼›ä½ æƒ³è®©MainActivityä¸­çš„Textviewæ˜¾ç¤ºç‚¹å‡»æ¬¡æ•°ï¼Œé‚£å°±è®©MainActivityç»§æ‰¿CallBackListenerã€‚<br>
æƒ…å†µ2: å‡è®¾CallBackæ¥å£æ˜¯å®šä¹‰åœ¨ç±»Aä¸­çš„ï¼Œè€Œä½ æƒ³è¦Bç±»å»å®ç°ä½ è¦çš„æ•ˆæœã€‚</p>
<pre><code class="language-java">public class A {
	public void add(MyCallBack myCallBack){
    	myCallBack.complete();
	}

	public interface MyCallBack{
    	void complete();
   		};
   	}
</code></pre>
<pre><code class="language-java">public class B {
	A a = new A();

	public void test(){
    	a.add(new A.MyCallBack(){
    		@Override
    		public void complete() {
    		//è‡ªå®šä¹‰æ•ˆæœ
    		}
    	});
   		};
   	}
</code></pre>
</li>
<li>
<p>ç¬¬äºŒæ­¥ä¸­ä½ æƒ³è¦çš„é‚£ä¸ªæ•ˆæœï¼Œæ˜¯è°å¯¼è‡´çš„ï¼Œæ˜¯è°è§¦å‘çš„ï¼Œå°±åœ¨è°ä¸­å¼•ç”¨<br>æ¯”å¦‚ï¼šå°ç‹æ‹¿åˆ°ç»“æœæ˜¯ç”±äºå°æå°†ç­”æ¡ˆä¼ ç»™äº†å°ç‹ï¼Œæ‰€ä»¥å°æå°±éœ€è¦é€šè¿‡answer()ä¸­çš„callbackè·å–åˆ°å°ç‹çš„å¼•ç”¨ï¼Œé€šè¿‡callBack.solveæŠŠresulä¼ ç»™å°ç‹ï¼›MainActivityä¸­TextViewå˜åŒ–æ˜¯ç”±äºFragmentä¸­Buttonçš„ç‚¹å‡»ï¼Œæ‰€ä»¥åœ¨Fragmentä¸­ï¼Œé¦–å…ˆé€šè¿‡getActivity()è·å–åˆ°MainActivityï¼Œç„¶ååœ¨Buttonçš„ç‚¹å‡»äº‹ä»¶ä¸­è°ƒç”¨onCallBack()æ–¹æ³•è¾¾åˆ°æ•ˆæœï¼›è‡ªå®šä¹‰æ•ˆæœæ˜¯åœ¨è°ƒç”¨a.addæ—¶è§¦å‘çš„ï¼Œæ‰€ä»¥å°±åœ¨ç±»Aä¸­å¼•ç”¨ï¼Œå³myCallBack.complete()ï¼ˆæƒ…å†µäºŒè¿™ç§æƒ…å†µï¼Œä¸€èˆ¬å¼•ç”¨çš„ç±»å’Œæ¥å£å®šä¹‰çš„ç±»æ˜¯åŒä¸€ä¸ªç±»ï¼‰<br>
<br><br></p>
</li>
</ol>
<p>è¿™æ—¶å€™å°±è¦è€ƒè™‘ä¸ºä»€ä¹ˆéœ€è¦æœ‰Callbackçš„å­˜åœ¨ï¼Œå®ƒçš„æ„ä¹‰æ˜¯ä»€ä¹ˆ<br>
åœ¨Javaå­¦ä¹ ä¸­æˆ‘ä»¬å°±çŸ¥é“äº†ï¼Œæ¥å£çš„ä½œç”¨æ˜¯ã€Œ<strong>æˆ‘æƒ³è¦ä¸€ä¸ªXXæ•ˆæœï¼Œä½†æ˜¯æˆ‘ç›®å‰å®ç°ä¸å‡ºæ¥ï¼Œæˆ–è€…è¯´å®ç°çš„ä¸å®Œå…¨ï¼Œé‚£å°±æŠŠå®ƒå®šä¹‰æˆä¸€ä¸ªæ¥å£ï¼Œè®©ä¸‹é¢ä¼šç”¨åˆ°è¿™ä¸ªæ•ˆæœçš„ç±»å»ç»§æ‰¿ï¼Œç„¶åå†æ ¹æ®è‡ªå·±çš„æƒ…å†µå»é‡è°ƒä»£ç </strong>ã€<br>
æˆ‘ä»¬è¿™æ—¶å€™ä¸¾ä¾‹ï¼Œå‡å¦‚è¿™ä¸ªæˆ‘ä»¬æƒ³è¦çš„æ•ˆæœå°±æ˜¯<strong>ç‚¹å‡»äº‹ä»¶</strong></p>
<h4 id="buttonåŸç”Ÿçš„ç‚¹å‡»äº‹ä»¶">ButtonåŸç”Ÿçš„ç‚¹å‡»äº‹ä»¶</h4>
<pre><code class="language-java">package android.view;

public interface OnClickListener {
	void  onClick(View v);
	//çœå»äº†å…¶ä»–ä»£ç 
}  
</code></pre>
<pre><code class="language-java">//MainActivityç±»
public  class MainActivity  extends Activity implements  OnClickListener{  
	private  Button button;  
    
	@Override   
	public void onCreate(Bundle savedInstanceState) {  
		super .onCreate(savedInstanceState);  
		setContentView(R.layout.activity_main);  
		button = (Button)findViewById(R.id.button1);  
		button.setOnClickListener(this);  
	}  

	@Override   
	public void onClick(View v) {
		//è¿™é‡Œå†™ä½ æƒ³è¦æ•ˆæœ
	}  
}  
</code></pre>
<pre><code class="language-java">//å‚è§â€˜ä¸ªäººçš„ç†è§£å’Œæƒ³æ³•â€™ç¬¬ä¸‰ç‚¹
//å› ä¸ºè¿™ä¸ªæ•ˆæœçš„ç›´æ¥æ¥ç”±æ˜¯ã€Œæˆ‘ç‚¹å‡»äº†Viewã€ (Buttonéš¶å±View)ï¼Œæ‰€ä»¥éœ€è¦åœ¨Viewç±»ä¸­è·å–MainActivityå¹¶å»è°ƒç”¨MainActivityçš„onClick()æ–¹æ³•
public class View implements Drawable.Callback, KeyEvent.Callback,AccessibilityEventSource {
	public OnClickListener mOnClickListener;

    public void setOnClickListener(@Nullable OnClickListener l) {
        if (!isClickable()) {
            setClickable(true);
        }
        
        //è·å–åˆ°äº†MainActivityï¼Œç±»ä¼¼äºä¾‹2ä¸­çš„getActivity()
        getListenerInfo().mOnClickListener = l;
    }
    
	public boolean performClick() {
		if (li != null &amp;&amp; li.mOnClickListener != null) {
		playSoundEffect(SoundEffectConstants.CLICK);
		
		//ç‚¹å‡»äº‹ä»¶ï¼Œè¿™é‡Œå³æ˜¯ã€Œå›è°ƒã€
		li.mOnClickListener.onClick(this);
		result = true;
		} 
    }
    //çœå»äº†å…¶ä»–ä»£ç 
}
</code></pre>
<blockquote>
<p>å…·ä½“åˆ†æå¯ä»¥çœ‹<a href="https://www.jianshu.com/p/3f86b7949f20">ç®€ä¹¦</a></p>
</blockquote>
<p><br><br><br>
ç”±ä¸Šæ€»ç»“ï¼Œå›è°ƒå…¶å®å°±æ˜¯ï¼š</p>
<h4 id="aè°ƒç”¨bçš„æ–¹æ³•béœ€è¦ä¼ å…¥aè‡ªèº«å¼•ç”¨æˆ–é€šè¿‡å…¶ä»–æ–¹å¼-getactivity-æ‹¿åˆ°açš„å¼•ç”¨åœ¨æ–¹æ³•bæ‰§è¡Œå®Œæ¯•ä¹‹åå†åˆ©ç”¨æ‹¿åˆ°çš„açš„å¼•ç”¨æ¥è°ƒç”¨aä¸­çš„æ–¹æ³•">Aè°ƒç”¨Bçš„æ–¹æ³•bï¼Œéœ€è¦ä¼ å…¥Aè‡ªèº«å¼•ç”¨ï¼Œæˆ–é€šè¿‡å…¶ä»–æ–¹å¼( getActivity() )æ‹¿åˆ°Açš„å¼•ç”¨ï¼Œåœ¨æ–¹æ³•bæ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œå†åˆ©ç”¨æ‹¿åˆ°çš„Açš„å¼•ç”¨ï¼Œæ¥è°ƒç”¨Aä¸­çš„æ–¹æ³•</h4>
<p><br>ä»¥ä¸Šä¸ºä¸ªäººç†è§£ï¼Œå¦‚æœæœ‰å“ªé‡Œå„ä½dalaoè§‰å¾—ä¸å¯¹æˆ–è€…å¯ä»¥æ”¹è¿›çš„å¸Œæœ›å¯ä»¥æå‡ºï¼Œå¦‚æœæœ‰ç–‘æƒ‘æƒ³è¦ä¸€èµ·äº¤æµçš„ä¹ŸåŒæ ·æ¬¢è¿ğŸ™†<br>
<br><br></p>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://ArsenicX.github.io/android/" class="tag">
                    Android
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">ä¸‹ä¸€ç¯‡</div>
                <a href="https://ArsenicX.github.io/2-ways-to-make-recycler-layout/">
                  <h3 class="post-title">
                    ä¸¤ç§æ–¹å¼å®ç°RecyclerViewå¤šå¸ƒå±€
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>


  <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad()
  </script>





  </body>
</html>
